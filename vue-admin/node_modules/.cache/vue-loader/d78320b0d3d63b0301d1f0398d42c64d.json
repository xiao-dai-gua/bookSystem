{"remainingRequest":"C:\\Users\\小林\\Desktop\\前端学习\\vuecli\\vue-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\小林\\Desktop\\前端学习\\vuecli\\vue-admin\\src\\views\\message\\list.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\小林\\Desktop\\前端学习\\vuecli\\vue-admin\\src\\views\\message\\list.vue","mtime":1633239799658},{"path":"C:\\Users\\小林\\Desktop\\前端学习\\vuecli\\vue-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\小林\\Desktop\\前端学习\\vuecli\\vue-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\小林\\Desktop\\前端学习\\vuecli\\vue-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\小林\\Desktop\\前端学习\\vuecli\\vue-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBnZXRBZGRyZXNzIH0gZnJvbSAnLi4vLi4vYXBpL2FkZHJlc3MnDQppbXBvcnQgeyBkZWxNZXNzYWdlLCBnZXRNZXNzYWdlLCBtZXNzYWdlQWRkcmVzc30gZnJvbSAnLi4vLi4vYXBpL21lc3NhZ2UnDQogICAgZXhwb3J0IGRlZmF1bHQgew0KICAgICAgZGF0YSgpIHsNCiAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgIG1lc3NhZ2VMaXN0OltdLA0KICAgICAgICAgICAgc2VhcmNoQWRkcmVzczoiIiwNCiAgICAgICAgICAgICBhZGRyZXNzTGlzdDpbXQ0KICAgICAgICAgICB9DQogICAgICAgIA0KICAgICAgfSwNCiAgICBtZXRob2RzOiB7DQogICAgICAgIC8v6I635Y+W5Zyw5Z2ADQogICAgICAgIGdldEFkZHJlc3NMaXN0KCl7DQogICAgICAgICAgICBnZXRBZGRyZXNzKCkudGhlbigocmVzKT0+ew0KICAgICAgICAgICAgICAgIHRoaXMuYWRkcmVzc0xpc3QgPSByZXMuZGF0YQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgfSwNCiAgICAgICAgLy/ph43nva7ooajljZUNCiAgICAgICAgcmVzZXRGb3JtKCl7DQogICAgICAgICAgIHRoaXMuc2VhcmNoQWRkcmVzcz0iIiwNCiAgICAgICAgICAgdGhpcy5nZXRNZXNzYWdlRGF0YSgpOw0KICAgICAgICB9LA0KICAgICAgICAvL+afpeivouihqOWNlQ0KICAgICAgICBvblN1Ym1pdCgpew0KICAgICAgICAgICAgIGxldCBhZGRyZXNzID0gIiI7DQogICAgICAgICAgICAgLy9tYXDpgY3ljobkuIANCiAgICAgICAgICAgIHRoaXMuYWRkcmVzc0xpc3QubWFwKChpdGVtKT0+ew0KICAgICAgICAgICAgaWYoaXRlbS5hZGRyZXNzaWQgPT0gdGhpcy5zZWFyY2hBZGRyZXNzKXsNCiAgICAgICAgICAgICAgICBhZGRyZXNzID0gaXRlbS5hZGRyZXNzbmFtZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSkNCiAgICAgICAgLy/mn6Xor6LooajljZXpgY3ljobovpPlh7oNCiAgICAgICAgbWVzc2FnZUFkZHJlc3Moew0KICAgICAgICAgICAgc2VhcmNoaWQ6dGhpcy5zZWFyY2hBZGRyZXNzDQogICAgICAgIH0pLnRoZW4oKHJlcyk9PnsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7DQogICAgICAgICAgICB0aGlzLm1lc3NhZ2VMaXN0ID0gcmVzLmRhdGEubWFwKChpdGVtKT0+ew0KICAgICAgICAgICAgICAgICBpdGVtLmFkZHJlc3NuYW1lID0gYWRkcmVzczsNCiAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0NCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICAvLyB0aGlzLm1lc3NhZ2VEYXRhID0gcmVzLmRhdGE7DQogDQogICAgICAgIH0pDQoNCiAgICAgICAgfSwNCiAgICAgICAgLy/ojrflj5bkv6Hmga8NCiAgICAgICAgZ2V0TWVzc2FnZURhdGEoKXsNCiAgICAgICAgICAgIGdldE1lc3NhZ2UoKS50aGVuKChyZXMpPT57DQogICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2VMaXN0ID0gcmVzLmRhdGENCiAgICAgICAgICAgIH0pDQogICAgICAgIH0sDQogICAgICAgIC8v5Yig6Zmk5raI5oGvDQogICAgICAgIGhhbmRsZURlbGV0ZShpbmRleCwgcm93KSB7DQogICAgICAgICB0aGlzLiRjb25maXJtKCfmraTmk43kvZzlsIbmsLjkuYXliKDpmaTor6Xmlofku7YsIOaYr+WQpue7p+e7rT8nLCAn5o+Q56S6Jywgew0KICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywNCiAgICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywNCiAgICAgICAgICB0eXBlOiAnd2FybmluZycNCiAgICAgICAgfSkudGhlbigoKSA9PiB7DQogICAgICAgICAgIGRlbE1lc3NhZ2Uoew0KICAgICAgICAgICAgaWQ6cm93LmpyaWQNCiAgICAgICAgfSkudGhlbigocmVzKT0+ew0KICAgICAgICAgICAgdGhpcy5nZXRNZXNzYWdlRGF0YSgpOw0KICAgICAgICB9KQ0KICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLA0KICAgICAgICAgICAgbWVzc2FnZTogJ+WIoOmZpOaIkOWKnyEnLA0KICAgICAgICAgIH0pOw0KICAgICAgICB9KS5jYXRjaCgoKSA9PiB7DQogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgICB0eXBlOiAnaW5mbycsDQogICAgICAgICAgICBtZXNzYWdlOiAn5bey5Y+W5raI5Yig6ZmkJw0KICAgICAgICAgIH0pOyAgICAgICAgICANCiAgICAgICAgfSk7DQogICAgICAgIH0sDQogICAgICAgIC8v5L+u5pS55L+h5oGvDQogICAgICAgICB1cGRhdGVCdG4oaXRlbSl7DQogICAgICAgICAgICAgY29uc29sZS5sb2coaXRlbSkNCiAgICAgICAgICAgICAvL+atpOenjeaWueazleWIt+aWsOmhtemdouS5i+WQjuS8oOWFpeeahOWAvOWwseS4jeingeS6hg0KICAgICAgICAgICAgLy8gIHRoaXMuJHJvdXRlci5wdXNoKHsNCiAgICAgICAgICAgIC8vICAgICAgbmFtZToiYWRkIiwNCiAgICAgICAgICAgIC8vICAgICAgcGFyYW1zOnsNCiAgICAgICAgICAgIC8vICAgICAgICAgIGlkOml0ZW0uanJpZA0KICAgICAgICAgICAgLy8gICAgICB9DQoNCiAgICAgICAgICAgIC8vICB9KQ0KICAgICAgICAgICAgDQogICAgICAgICAgICAvL+atpOenjeaWueazleWIt+aWsOmhtemdouS5i+WQjuS8oOWFpeeahOWAvOS4jeS8muS4jeingQ0KICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goew0KICAgICAgICAgICAgICAgIHBhdGg6Ii9tZXNzYWdlL2FkZCIsDQogICAgICAgICAgICAgICAgcXVlcnk6ew0KICAgICAgICAgICAgICAgICAgICBpZDppdGVtLmpyaWQNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KQ0KICAgICAgICB9LA0KICAgICAgIH0sDQogICAgICAgIGNyZWF0ZWQoKSB7DQogICAgICAgIHRoaXMuZ2V0TWVzc2FnZURhdGEoKTsNCiAgICAgICAgdGhpcy5nZXRBZGRyZXNzTGlzdCgpOw0KICAgICAgICAgfSwNCiAgICB9DQo="},{"version":3,"sources":["list.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"list.vue","sourceRoot":"src/views/message","sourcesContent":["<template>\r\n    <div>\r\n        <!--inline是否在同行-->\r\n    <el-form :inline=\"true\">\r\n        <el-form-item label=\"选择地址\">\r\n            <!--框里面输入的值用searchAddress接收-->\r\n            <el-select v-model=\"searchAddress\" placeholder=\"请选择图书地址\">\r\n                <!--加冒号等于v-bind缩写 绑定属性-->\r\n             <el-option v-for=\"item in addressList\" :key=\"item.addressid\" :label=\"item.addressname\" :value=\"item.addressid\"></el-option>\r\n            </el-select>\r\n        </el-form-item>\r\n        <el-form-item>\r\n            <el-button type=\"primary\" @click=\"onSubmit\">查询</el-button>\r\n            <el-button @click=\"resetForm\">重置</el-button>\r\n    </el-form-item>\r\n</el-form>\r\n        <el-table\r\n      :data=\"messageList\"\r\n      style=\"width: 100%\">\r\n      <el-table-column\r\n      type=\"index\"\r\n     >\r\n      </el-table-column>\r\n      <el-table-column\r\n        prop=\"jrname\"\r\n        label=\"姓名\"\r\n        >\r\n      </el-table-column>\r\n      <el-table-column\r\n        prop=\"addressname\"\r\n        label=\"地址\"\r\n       >\r\n      </el-table-column>\r\n       <el-table-column\r\n        prop=\"levelname\"\r\n        label=\"等级\">\r\n      </el-table-column>\r\n       <el-table-column\r\n        prop=\"jrtel\"\r\n        label=\"手机号\">\r\n       </el-table-column>\r\n     <el-table-column label=\"操作\">\r\n      <template slot-scope=\"scope\">\r\n        <el-button\r\n          size=\"mini\"\r\n          @click.native.prevent=\"updateBtn(scope.row)\">修改</el-button>\r\n        <el-button\r\n          size=\"mini\"\r\n          type=\"danger\"\r\n          @click=\"handleDelete(scope.$index, scope.row)\">移除</el-button>\r\n      </template>\r\n    </el-table-column>\r\n    </el-table>\r\n    </div>\r\n</template>\r\n<script>\r\nimport { getAddress } from '../../api/address'\r\nimport { delMessage, getMessage, messageAddress} from '../../api/message'\r\n    export default {\r\n      data() {\r\n        return {\r\n            messageList:[],\r\n            searchAddress:\"\",\r\n             addressList:[]\r\n           }\r\n        \r\n      },\r\n    methods: {\r\n        //获取地址\r\n        getAddressList(){\r\n            getAddress().then((res)=>{\r\n                this.addressList = res.data\r\n            })\r\n        },\r\n        //重置表单\r\n        resetForm(){\r\n           this.searchAddress=\"\",\r\n           this.getMessageData();\r\n        },\r\n        //查询表单\r\n        onSubmit(){\r\n             let address = \"\";\r\n             //map遍历一\r\n            this.addressList.map((item)=>{\r\n            if(item.addressid == this.searchAddress){\r\n                address = item.addressname;\r\n            }\r\n        })\r\n        //查询表单遍历输出\r\n        messageAddress({\r\n            searchid:this.searchAddress\r\n        }).then((res)=>{\r\n            console.log(res);\r\n            this.messageList = res.data.map((item)=>{\r\n                 item.addressname = address;\r\n                 return item\r\n            })\r\n            // this.messageData = res.data;\r\n \r\n        })\r\n\r\n        },\r\n        //获取信息\r\n        getMessageData(){\r\n            getMessage().then((res)=>{\r\n               this.messageList = res.data\r\n            })\r\n        },\r\n        //删除消息\r\n        handleDelete(index, row) {\r\n         this.$confirm('此操作将永久删除该文件, 是否继续?', '提示', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n        }).then(() => {\r\n           delMessage({\r\n            id:row.jrid\r\n        }).then((res)=>{\r\n            this.getMessageData();\r\n        })\r\n          this.$message({\r\n            type: 'success',\r\n            message: '删除成功!',\r\n          });\r\n        }).catch(() => {\r\n          this.$message({\r\n            type: 'info',\r\n            message: '已取消删除'\r\n          });          \r\n        });\r\n        },\r\n        //修改信息\r\n         updateBtn(item){\r\n             console.log(item)\r\n             //此种方法刷新页面之后传入的值就不见了\r\n            //  this.$router.push({\r\n            //      name:\"add\",\r\n            //      params:{\r\n            //          id:item.jrid\r\n            //      }\r\n\r\n            //  })\r\n            \r\n            //此种方法刷新页面之后传入的值不会不见\r\n            this.$router.push({\r\n                path:\"/message/add\",\r\n                query:{\r\n                    id:item.jrid\r\n                }\r\n            })\r\n        },\r\n       },\r\n        created() {\r\n        this.getMessageData();\r\n        this.getAddressList();\r\n         },\r\n    }\r\n</script>\r\n\r\n"]}]}